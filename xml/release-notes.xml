<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
     "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
[
 <!ENTITY % myents SYSTEM "release-notes.ent" >
 %myents;
]>

<article lang="en" id="rnotes">
 <title>&rnotes;</title>
 <articleinfo>
  <releaseinfo>&rversion;</releaseinfo>
  <productname>&opensuseleap;</productname>
  <productnumber>&version;</productnumber>
  <date><?dbtimestamp format="Y-m-d"?></date>
  <abstract>
   <para>
    &opensuseleap; is a free and Linux-based operating system for your
    PC, Laptop or Server.  You can surf the web, manage your e-mails and
    photos, do office work, play videos or music and have a lot of fun!
   </para>
  </abstract>
 </articleinfo>

 <!-- split this para on account of bnc#401301 -->

 <!-- during beta testing -->
 <!--
 <para>
  This is the initial version of the release notes for the forthcoming
  <phrase os="slprof">&opensuse; &suse-version;</phrase>.
 </para>
-->
 <!-- final
  <para>
  The release notes are under constant development.
  To find out about the latest updates, refer to
  <ulink url="https://doc.opensuse.org/releasenotes">https://doc.opensuse.org/releasenotes</ulink>.

  <phrase role="transwarn">We update the English release notes whenever need
  arises.  This means that translations might temporarily be
  incomplete.</phrase>

  <phrase role="transwarn">The translations are updated to match
  later.</phrase>
</para>
-->

 <!-- Previous Release Notes -->
 <para>
  If you upgrade from an older version to this &opensuseleap; release, see
  previous release notes listed here:
  <ulink url="http://en.opensuse.org/openSUSE:Release_Notes">http://en.opensuse.org/openSUSE:Release_Notes</ulink>.
 </para>

 <!-- beta statement -->
 <!--
 <para os="slprof">
  This public beta test is part of the &opensuse; project.  Information
  about the project is available at <ulink url="http://opensuse.org"/>.</para>

 <para os="slprof">Find information about known bugs for this beta in the
  &opensuse; wiki at <ulink url="http://en.opensuse.org/Bugs:Most_Annoying_Bugs"/>.
  Please report all bugs you encounter using this prerelease of &opensuse;
  &suse-version; in the Novell Bugzilla at <ulink
   url="http://en.opensuse.org/Submitting_Bug_Reports"/>.  If you would like to
  see anything added to the release notes, please file a bug report against the
  <quote>Release Notes</quote> component.
 </para>
 -->

 <!--
 <section id="prerelease" role="prerelease">
  <title>Prerelease Notes</title>

  <section id="code-name">
   <title>N/A&mdash;Codename &opensuse; &suse-version;</title>

  <para>
   The code name for &opensuse; &suse-version; is N/A.
  </para>
  </section>
 </section>
-->

 <section id="installation">
  <title>Installation</title>

  <para/>
  <!--
  <section>
   <title>Detailed Installation Information</title>

   <para>For detailed installation information, see <xref linkend="sec.123.documentation"/>.</para>
  </section>
  -->

  <section>
   <!-- https://bugzilla.suse.com/show_bug.cgi?id=947712 -->
   <!-- https://bugzilla.opensuse.org/show_bug.cgi?id=951866 -->
   <title>Minimal System Installation</title>
   <para>
    In order to avoid some big recommended packages from being
    installed, the pattern for minimal installations uses another
    pattern that creates conflicts with undesired packages. This pattern,
    <literal>patterns-openSUSE-minimal_base-conflicts</literal>,
    can be removed after installation.
   </para>
   <para>
    Note that the minimal installation has no firewall by
    default. If you need one, install
    <literal>SuSEfirewall2</literal>.
   </para>
  </section>

  <section id="sec.123.uefi">
   <title>UEFI&mdash;Unified Extensible Firmware Interface</title>
   <para>
    Prior to installing &opensuse; on a system that boots using UEFI
    (Unified Extensible Firmware Interface), you are urgently advised to
    check for any firmware updates the hardware vendor recommends and,
    if available, to install such an update. A pre-installed Windows 8
    is a strong indication that your system boots using UEFI.
   </para>

   <para>
    <emphasis>Background:</emphasis> Some UEFI firmware has bugs that
    cause it to break if too much data gets written to the UEFI storage
    area. Nobody really knows how much "too much" is, though. &opensuse;
    minimizes the risk by not writing more than the bare minimum
    required to boot the OS.  The minimum means telling the UEFI
    firmware about the location of the &opensuse; boot loader.  Upstream
    Linux kernel features that use the UEFI storage area for storing
    boot and crash information (<literal>pstore</literal>) have been
    disabled by default. Nevertheless, it is recommended to install any
    firmware updates the hardware vendor recommends.
   </para>
  </section>


  <section id="sec.123.uefi-part">
   <!-- bnc#850056 -->
   <title>UEFI, GPT, and MS-DOS Partitions</title>
   <para>
    Together with the EFI/UEFI specification, a new style of
    partitioning arrived: GPT (GUID Partition Table). This new schema
    uses globally unique identifiers (128-bit values displayed in 32
    hexadecimal digits) to identify devices and partition types.
   </para>
   <para>
    Additionally, the UEFI specification also allows legacy MBR (MS-DOS)
    partitions. The Linux boot loaders (ELILO or GRUB2) try to
    automatically generate a GUID for those legacy partitions, and write
    them to the firmware. Such a GUID can change frequently, causing a
    rewrite in the firmware. A rewrite consist of two different
    operation: removing the old entry and creating a new entry that
    replaces the first one.
   </para>
   <para>
    Modern firmware has a garbage collector that collects deleted
    entries and frees the memory reserved for old entries. A problem
    arises when faulty firmware does not collect and free those entries;
    this may end up with a non-bootable system.
   </para>
   <para>
    The workaround is simple: convert the legacy MBR partition to the
    new GPT to avoid this problem completely.
   </para>
  </section>

   <!-- http://bugzilla.opensuse.org/show_bug.cgi?id=950877 -->
   <!-- http://bugzilla.opensuse.org/show_bug.cgi?id=952019 -->
   <!-- <title>openSUSE Leap as Guest in VirtualBox</title> -->

 </section>

 <section id="upgrade">
  <title>System Upgrade</title>

   <section>
    <title>Network Interface Names</title>
    <para>
     When upgrading a remote machine from &opensuse; 13.2, make sure your
     network interfaces are named correctly.
    </para>
    <para>
     &opensuse; 13.2 used so-called predictable network interface names (for
     example, <literal>enp5s0</literal>), whereas &opensuseleap; 42.1 uses persistent
     interface names (<literal>eth0</literal>). After upgrading and rebooting,
     the network interface names may therefore change. This could lock you out
     of the system. To avoid interfaces from being renamed, run the following
     command for each of your network interfaces before you reboot the system:
    </para>

<screen>/usr/lib/udev/udev-generate-persistent-rule -v -c <replaceable>enp5s0</replaceable> -n <replaceable>enp5s0</replaceable> -o /etc/udev/rules.d/70-persistent-net.rules</screen>

    <para>
     Replace <replaceable>enp5s0</replaceable> with the name of your network
     interface.
    </para>
   </section>

   <section>
    <title>Btrfs: Disk Space Leak after System Rollbacks</title>
    <para>
     &opensuse; 13.2 used a Btrfs partition layout that allowed for disk space
     to become permanently occupied with stale, inaccessible contents after the
     first system rollback was executed.
     This layout issue has been fixed in &opensuseleap; 42.1.
     However, the fix can only be applied to newly installed systems.
    </para>
    <para>
     If you are upgrading from &opensuse; 13.2, you cannot convert the
     to the new layout, but you can reclaim the lost disk space.
    </para>
     <step>
      <para>
       Mount the initial root filesystem:
      </para>
<screen>mount /dev/<replaceable>&lt;ROOT_FILE_SYSTEM&gt;</replaceable> -o subvolid=5 /mnt</screen>
     </step>
     <step>
      <para>
       Remove all files below /mnt that are not in a subvolume:
      </para>
<screen>find /mnt -xdev -delete</screen>
     </step>
     <step>
      <para>
       Umount the filesystem again:
      </para>
<screen>umount /mnt</screen>
     </step>
    </procedure>
   </section>

 </section>

 <section id="general">
  <title>General</title>

   <section>
    <title>Non-Oss Repository</title>
    <para>
     After the installation, the non-oss repository is disabled.
    </para>
    <para>
     Enable the <literal>openSUSE-Leap-42.1-Non-Oss</literal> repository using
     YaST or on the command line using zypper:
     <screen>zypper mr -e repo-non-oss</screen>
    </para>
   </section>

 </section>

 <section id="technical">
  <title>Technical</title>
  <para/>

  <section role="notoc" id="fate-314630" remap="Packages:Packaging">
   <!-- sort_key="None"; non-rn-fate-cats=""; -->
   <title>Printing System: Improvements and Incompatible Changes</title>
   <!-- href="https://fate.novell.com/314630" -->
   <para>
    <emphasis role="bold">CUPS Version Upgrade to 1.7</emphasis>
   </para>
   <para>
    The new CUPS version introduced some major changes compared to 1.5
    that may require manual configuration adjustments.
   </para>

   <itemizedlist>
    <listitem>
     <para>
      PDF is now the standard print job format rather than PS.
      Therefore traditional PostScript printers now also need a
      filter driver for printing.
     </para>
     <para>
      See
      <ulink url="https://en.opensuse.org/Concepts_printing">https://en.opensuse.org/Concepts_printing</ulink>
      for details.
     </para>
    </listitem>

    <listitem>
     <para>
      The network printer discovery protocol has changed.
      The native method to discover network printers is now based on DNS Service
      discovery (DNS-SD, that is, via Avahi).
      The <literal>cups-browsed</literal> service from the
      <literal>cups-filters</literal> package can be used to bridge old and new
      protocols. Both <literal>cupsd</literal> and
      <literal>cups-browsed</literal> need to run to make "legacy" clients
      discover printers (that includes LibreOffice and KDE).
     </para>
    </listitem>

    <listitem>
     <para> The IPP protocol default version changed from 1.1
      to 2.0. Older IPP servers like CUPS 1.3.x (for example in
      &sle; 11) reject IPP 2.0 requests with <literal>Bad Request</literal> (see
      <ulink url="http://www.cups.org/str.php?L4231"/>).
     </para>

     <para>
      To be able to print to old servers, the IPP protocol version must be
      specified explictly by appending <literal>/version=1.1</literal> to either:
     </para>

     <itemizedlist>
      <listitem>
       <para>
        The <literal>ServerName</literal> settings in
        <literal>client.conf</literal> (for example,
        <literal>ServerName older.server.example.com/version=1.1</literal>).
       </para>
      </listitem>

      <listitem>
       <para>
        The <literal>CUPS_SERVER</literal> environment variable value.
       </para>
      </listitem>

      <listitem>
       <para>
        The server name value of the <literal>-h</literal> option of the
        command line tools, for example:
       </para>
        <screen>lpstat -h older.server.example.com/version=1.1 -p</screen>
      </listitem>
     </itemizedlist>
    </listitem>

    <listitem>
     <para>
      Some printing filters and back-ends were moved from the
      <literal>cups</literal> package to the <literal>cups-filters</literal>
      package.
     </para>
    </listitem>

    <listitem>
     <para> Some configuration directives were split from <literal>cupsd.conf</literal>
      into <literal>cups-files.conf</literal>
      (see
      <ulink url="http://www.cups.org/str.php?L4223">http://www.cups.org/str.php?L4223</ulink>,
      CVE-2012-5519, and
      <ulink url="https://bugzilla.opensuse.org/show_bug.cgi?id=789566">https://bugzilla.opensuse.org/show_bug.cgi?id=789566</ulink>).
     </para>
    </listitem>
    <listitem>
     <para>CUPS banners and the CUPS test page were moved from
      the <literal>cups</literal> package to the
      <literal>cups-filters</literal> package (see
      <ulink url="http://www.cups.org/str.php?L4120">http://www.cups.org/str.php?L4120</ulink>
      and
      <ulink url="https://bugzilla.opensuse.org/show_bug.cgi?id=735404">https://bugzilla.opensuse.org/show_bug.cgi?id=735404</ulink>).
     </para>
    </listitem>
   </itemizedlist>
  </section>
 </section>

 <section id="misc" remap="Misc">
  <title>Miscellaneous</title>
  <section>
   <title>KDE and Network Authentication</title>
   <para>
    When using the KDE display manager SDDM with an authentication
    method that provides a high number of users, SDDM becomes
    unusable. Additionally, if the automounter is used, SDDM may
    block for a long time on startup trying to mount every user's home.
   </para>
   <para>
    Modify <filename>/etc/sddm.conf</filename> to contain the following entries:
    <programlisting>[Theme]
Current=maldives

[Users]
MaximumUid=1002</programlisting>
   </para>
   <para>
    See
    <ulink url="https://bugzilla.suse.com/show_bug.cgi?id=953778">https://bugzilla.suse.com/show_bug.cgi?id=953778</ulink>
    for details.
   </para>
  </section>

  <section>
   <title>No Screensaver Support in KDE Plasma</title>
   <para>
    KDE Plasma does not support screensavers by default.
    If you prefer to have a screensaver, install the
    package <literal>xscreensaver</literal>.
   </para>
   <para>
    Set <command>xscreensaver</command> to start with the desktop session by
    selecting <menuchoice><guimenu>K</guimenu><guimenu>Settings</guimenu>
    <guimenu>Configure Desktop</guimenu></menuchoice>, then choose
    <menuchoice><guimenu>Startup and Shutdown</guimenu>
    <guimenu>Autostart</guimenu></menuchoice>.
    Click <guimenu>Add Program</guimenu>, type <literal>xscreensaver</literal>
    and click <guimenu>OK</guimenu>.
   </para>
   <para>
    To configure the screensaver, use <command>xscreensaver-demo</command>.
   </para>
  </section>

 </section>

 <section id="Feedback">
  <!-- bnc#809347 -->
  <title>More Information and Feedback</title>

  <itemizedlist>
   <listitem>
    <para>
     Read the <filename>README</filename> documents on the medium.
    </para>
   </listitem>
   <listitem>
    <para>
     View a detailed changelog information about a particular package from its
     RPM:
    </para>
    <screen>rpm --changelog -qp <replaceable>FILENAME</replaceable>.rpm</screen>
    <para>
     Replace <replaceable>FILENAME</replaceable> with the name of the RPM.
    </para>
   </listitem>
   <listitem>
    <para>
     Check the <filename>ChangeLog</filename> file in the top level of the
     medium for a chronological log of all changes made to the updated packages.
    </para>
   </listitem>
   <listitem>
    <para>
     Find more information in the <filename>docu</filename> directory on the
     medium.
    </para>
   </listitem>
   <listitem>
    <para>
     <ulink url="https://activedoc.opensuse.org/">https://activedoc.opensuse.org/</ulink> contains additional
     or updated documentation.</para>
   </listitem>
   <listitem>
    <para>
     Visit <ulink url="https://www.opensuse.org">https://www.opensuse.org</ulink> for the latest product news
     from &opensuse;.
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Copyright © 2015 SUSE LLC
  </para>

  <para>
   Thanks for using &opensuse;.
  </para>
  <para>
   The &opensuse; Team.
  </para>
 </section>

</article>
